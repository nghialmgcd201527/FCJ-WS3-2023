<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.118.1">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="../../images/favicon.png" type="image/png">

    <title>Device Redirects :: AWS System Manager</title>

    
    <link href="../../css/nucleus.css?1703334444" rel="stylesheet">
    <link href="../../css/fontawesome-all.min.css?1703334444" rel="stylesheet">
    <link href="../../css/hybrid.css?1703334444" rel="stylesheet">
    <link href="../../css/featherlight.min.css?1703334444" rel="stylesheet">
    <link href="../../css/perfect-scrollbar.min.css?1703334444" rel="stylesheet">
    <link href="../../css/auto-complete.css?1703334444" rel="stylesheet">
    <link href="../../css/atom-one-dark-reasonable.css?1703334444" rel="stylesheet">
    <link href="../../css/theme.css?1703334444" rel="stylesheet">
    <link href="../../css/hugo-theme.css?1703334444" rel="stylesheet">
    
    <link href="../../css/theme-workshop.css?1703334444" rel="stylesheet">
    
    

    <script src="../../js/jquery-3.3.1.min.js?1703334444"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="../../3-cache/3.3-devicered/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="../../">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../js/lunr.min.js?1703334444"></script>
<script type="text/javascript" src="../../js/auto-complete.js?1703334444"></script>
<script type="text/javascript">
    
        var baseurl = "";
    
</script>
<script type="text/javascript" src="../../js/search.js?1703334444"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-introduce/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="../../1-introduce/">
           <b> 1. </b> Introduction
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/1-introduce/1.1-usecase/" title="Use Cases" class="dd-item 
        
        
        
        ">
      <a href="../../1-introduce/1.1-usecase/">
           <b> 1.1 </b> Use Cases
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/1-introduce/1.2-edge/" title="Edge Compute" class="dd-item 
        
        
        
        ">
      <a href="../../1-introduce/1.2-edge/">
           <b> 1.2 </b> Edge Compute
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2-prerequiste/" title="Solution Deployment" class="dd-item 
        
        
        
        ">
      <a href="../../2-prerequiste/">
           <b> 2. </b> Solution Deployment
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/3-cache/" title="Use case of Cacheable" class="dd-item 
        parent
        
        
        ">
      <a href="../../3-cache/">
           <b> 3. </b> Use case of Cacheable
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/3-cache/3.1-urired/" title="URI based Redirects" class="dd-item 
        
        
        
        ">
      <a href="../../3-cache/3.1-urired/">
           <b> 3.1. </b> URI based Redirects
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-cache/3.2-geored/" title="Geo Location Redirects" class="dd-item 
        
        
        
        ">
      <a href="../../3-cache/3.2-geored/">
           <b> 3.2. </b> Geo Location Redirects
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-cache/3.3-devicered/" title="Device Redirects" class="dd-item 
        
        active
        
        ">
      <a href="../../3-cache/3.3-devicered/">
           <b> 3.3. </b> Device Redirects
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/3-cache/3.4-urirew/" title="URI based Rewrites" class="dd-item 
        
        
        
        ">
      <a href="../../3-cache/3.4-urirew/">
           <b> 3.4. </b> URI based Rewrites
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/4-terminate/" title="Cleanup" class="dd-item 
        
        
        
        ">
      <a href="../../4-terminate/">
           <b> 4. </b> Cleanup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/3-cache/3.3-devicered/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="/vi/3-cache/3.3-devicered/">Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>23-08-2023</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
                <a href="https://www.linkedin.com/in/jotaguy"  style="color:orange">Gia Hưng </a> <br>
                <a href="https://www.linkedin.com/in/vanhoangkha/"  style="color:orange">Hoàng Kha </a> <br>
                <a href="https://www.linkedin.com/in/lmnghia297/"  style="color:orange">Minh nghĩa</a>
               
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../'>Using Edge Functions to handle Rewrites and Redirects</a> > <a href='../../3-cache/'>Use case of Cacheable</a> > Device Redirects
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Device Redirects
            </h1>
          

        



	<p>This case is used to redirect the viewer to the website&rsquo;s proper page based on the type of device sending the request. The following diagram shows the architecture and requested steps that we will do in this section.</p>
<p><img src="../../images/3.cache/3.3-devicered/3.3-chart1.png" alt="bổ sung">
<img src="../../images/3.cache/3.3-devicered/3.3-chart2.png" alt="bổ sung"></p>
<h4 id="step-1-create-cloudfront-cache-policy-to-forward-device-type-header">Step 1: Create CloudFront Cache policy to forward device type header:</h4>
<p>To be able to Redirect users based on <strong>device type</strong>, CloudFront headers determine the device type of the user that will be linked to the Lambda@Edge function. To do that, you will need to create a Cache Policy in which a header is added to the cache key. In this workshop, you will use <strong>CloudFront-Is-Mobile-Viewer</strong> but other headers are also available.</p>
<p>Go to the [CloudFront Policies console] page(<a href="https://us-east-1.console.aws.amazon.com/cloudfront/v3/home?region=us-east-1#/policies/cache)">https://us-east-1.console.aws.amazon.com/cloudfront/v3/home?region=us-east-1#/policies/cache)</a>. We do the same as the <strong>Geo Location Redirects</strong> section above, we create a Cache Policy named <code>device-redirect-cache-policy</code>. And in <strong>Headers</strong> of the <strong>Cache key settings</strong> section, we search and select <strong>CloudFront-Is-Mobile-Viewer</strong>. Finally, we click on the <strong>Create</strong> button.</p>
<p><img src="../../images/3.cache/3.3-devicered/3.3-1new.png" alt="bổ sung"></p>
<h4 id="step-2-create-lambdaedge-function-and-publish-new-version">Step 2: Create Lambda@Edge function and publish new version</h4>
<p>In this step, we will do as in the previous section, create a <strong>Lambda function</strong> with the name <code>edge-device-redirect</code>, <strong>Runtime</strong> is <strong>Python 3.9</strong> and deploy it. After that, we need to publish the new version of the Lambda function we just created.</p>
<p>The source code of this Lambda function is:</p>
<pre tabindex="0"><code>import json
def lambda_handler(event, context):
    print(event)
    #Let&#39;s first get the Device Type from the Request coming in
    get_device_viewer_header = event[&#39;Records&#39;][0][&#39;cf&#39;][&#39;request&#39;][&#39;headers&#39;][&#39;cloudfront-is-mobile-viewer&#39;]
    define_device_type = get_device_viewer_header[0][&#39;value&#39;]
    print(define_device_type)
    #Now let&#39;s see if this device is a mobile viewer or not and create the redirected response based on that
    if (define_device_type == &#39;true&#39;):
        response = {
            &#39;status&#39;: &#39;301&#39;,
            &#39;statusDescription&#39;: &#39;Permanent Redirect&#39;,
            &#39;headers&#39;: {
                &#39;location&#39;: [{
                    &#39;key&#39;: &#39;Location&#39;,
                    &#39;value&#39;: &#39;/mobile.html&#39;
                }]
            }
        }
        #The response above has been created and a response will be sent to the viewer to redirect it the right device page
        return response
    else:
        #if the device is not mobile, then move along with the request as is.
        request = event[&#39;Records&#39;][0][&#39;cf&#39;][&#39;request&#39;]
        return request
</code></pre><h4 id="step-3-create-cloudfront-behavior-for-this-case">Step 3: Create CloudFront behavior for this case</h4>
<p>Now the Lambda function has just been created and we have to assign it to a Cache Behavior in CloudFront. We do the same as the <strong>Geo Location Redirects</strong> section above. With the <strong>Path Pattern,</strong> we enter <code>/device.html</code> and remember to select the <strong>Cache policy</strong> as the <strong>device-redirect-cache-policy</strong> just created above.</p>
<p><img src="../../images/3.cache/3.3-devicered/3.3-2new.png" alt="bổ sung"></p>
<h4 id="step-4-combine-lambda-function-with-cloudfront-behavior">Step 4: Combine Lambda Function with CloudFront Behavior</h4>
<p>We do as in the <strong>Geo Location Redirects</strong> section above, we will combine the Lambda function <strong>edge-device-redirect</strong> with the CloudFront Behavior just created above.</p>
<h4 id="step-5-set-up-clients-for-testing">Step 5: Set up clients for testing</h4>
<p>We will need a client to run curl commands. The easy way is to create <strong>CloudShell Environments</strong>. CloudShell is a shell available in the AWS console and we can run Linux commands from it. Go to <a href="https://us-east-1.console.aws.amazon.com/cloudshell/home?region=us-east-1#">CloudShell Console</a> and wait until the terminal is ready to use.</p>

<div class="notices info" ><p>If CloudShell does not work, if you are doing this workshop on a Linux/MacOS client, these two operating systems already have <strong>curl</strong> and you just need to run the command on that client. If you are using Windows, use online curl tools like <a href="https://reqbin.com/curl">this one</a>. You can run an EC2 instance or Cloud9 IDE from AWS COnsole to run commands.</p>
</div>

<h4 id="step-6-test-redirect-configuration">Step 6: Test redirect configuration</h4>
<ol>
<li>
<p>Go to <a href="https://us-east-1.console.aws.amazon.com/cloudshell/home?region=us-east-1#">CloudShell Console</a>.</p>
</li>
<li>
<p>In the test, we will run the curl command to send http requests against our distribution, to do so, we need to copy the Distribution domain name from the CloudFront console where we can find it.</p>
</li>
</ol>
<p><img src="../../images/3.cache/3.1-urired/3.1-13new.png" alt="VPC"></p>
<p>Once you&rsquo;ve found the distribution domain name, copy the following command and replace it with our domain name.</p>
<pre tabindex="0"><code>curl -v -o /dev/null https://&lt;YOUR-DISTRIBUTION-DOMAIN-NAME&gt;/device.html
</code></pre><ol start="3">
<li>After building the above command from cloudshell, we will see the result as below.</li>
</ol>
<pre tabindex="0"><code>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: text/html
&lt; Content-Length: 106
&lt; Connection: keep-alive
&lt; ETag: &#34;73940ca66258e1bd0a623690f24fe324&#34;
&lt; Accept-Ranges: bytes
&lt; Server: AmazonS3
&lt; X-Cache: Miss from cloudfront
&lt; Via: 1.1 2f66aa06710fece8ed203ab0ea81eb56.cloudfront.net (CloudFront)
&lt; X-Amz-Cf-Pop: IAD89-C3
&lt; X-Amz-Cf-Id: ChlZowW_za1QF6FVmDX2iTENoknUBJxoxpMNV6S28E37g0khLdnxwg==
&lt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;

&lt;h1&gt;non-mobile URI Page&lt;/h1&gt;
&lt;p&gt;non-mobile URI Page&lt;/p&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<div class="notices info" ><p>The above request shows a regular response. This happens simply because the device we send the request to is not recognized by the Lambda@Edge function as a mobile device and it allows the request to proceed normally.</p>
</div>

<ol start="4">
<li>Please run the command below again.</li>
</ol>
<pre tabindex="0"><code>curl -v https://d2lagt3tnycm19.cloudfront.net/device.html -A &#34;Mozilla/5.0 (iPhone; CPU iPhone OS 6_1_3 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) CriOS/28.0.1500.12 Mobile/10B329 Safari/8536.25&#34;
</code></pre><p>We will see different responses.</p>
<pre tabindex="0"><code>&lt; HTTP/1.1 301 Moved Permanently
&lt; Content-Length: 0
&lt; Connection: keep-alive
&lt; Server: CloudFront
&lt; Location: /mobile.html
&lt; X-Cache: Miss from cloudfront
&lt; Via: 1.1 a4cae74c829bc214e4183c38164a2c0a.cloudfront.net (CloudFront)
&lt; X-Amz-Cf-Pop: IAD89-C3
&lt; X-Amz-Cf-Id: sQ0_5pUMkOAJOBJUiTdDmEKGaq7ExMDotLmPsi-17WouwqcJBu7mNA==
&lt;
</code></pre>
<div class="notices info" ><p>The response here is currently HTTP 301, indicating redirect. This happens because the requested User-Agent is identified as a mobile device, our Lambda@Edge catches that and responds with a redirect.</p>
</div>

<ol start="5">
<li>Now, run the command as in section 4, we will see the difference.</li>
</ol>
<pre tabindex="0"><code>&lt; HTTP/1.1 301 Moved Permanently
&lt; Content-Length: 0
&lt; Connection: keep-alive
&lt; Server: CloudFront
&lt; Location: /mobile.html
&lt; X-Cache: Hit from cloudfront
&lt; Via: 1.1 38ecebcaa39c8742da2b6336935bb446.cloudfront.net (CloudFront)
&lt; X-Amz-Cf-Pop: IAD89-C3
&lt; X-Amz-Cf-Id: 97bOlPobmuIto-LcDA5AbPprf6oXSniK4pq16RRpZSjVPVSb8HUr4Q==
&lt; Age: 133
</code></pre>
<div class="notices info" ><p>The main difference here is that the X-Cache header has the value <strong>Hit from cloudfront</strong>, meaning this function does not need to be run again because the request has been cached.</p>
</div>

<p>So we have successfully deployed redirect logic using Lambda@Edge and finished testing. This case can be expanded to be more complex, identifying not only <strong>mobile devices</strong> but also <strong>Android and IOS clients,</strong> identifying <strong>SmartTVs and Tablets</strong> can also be done. Okay. Refer to <a href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/using-cloudfront-headers.html#cloudfront-headers-device-type">this document</a> to learn more about all headers location is possible in CloudFront.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="../../3-cache/3.2-geored/" title="Geo Location Redirects"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../3-cache/3.4-urirew/" title="URI based Rewrites" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js?1703334444"></script>
    <script src="../../js/perfect-scrollbar.min.js?1703334444"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js?1703334444"></script>
    <script src="../../js/jquery.sticky.js?1703334444"></script>
    <script src="../../js/featherlight.min.js?1703334444"></script>
    <script src="../../js/highlight.pack.js?1703334444"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../js/modernizr.custom-3.6.0.js?1703334444"></script>
    <script src="../../js/learn.js?1703334444"></script>
    <script src="../../js/hugo-learn.js?1703334444"></script>

    <link href="../../mermaid/mermaid.css?1703334444" rel="stylesheet" />
    <script src="../../mermaid/mermaid.js?1703334444"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
